// import Whatever from 'https://unpkg.com/whatever'
// import Whatever from 'whatever'

// import { default as index_css }  from './css/index.css'

// import {h, render } from 'https://unpkg.com/preact?module';
// import {App} from './app.js'

// // console.info(index_css)
// console.log('ðŸ’€ðŸ¤˜')
// render(h(App), document.getElementById("app"));


// Utility


function $(/* args */) {
    let root = document;
    let query = arguments[0];
    if (arguments[0] instanceof Element || arguments[0] instanceof DocumentFragment) {
        root = arguments[0];
        query = arguments[1];
    }
    return root.querySelector(query);
}

function svg(type) {
    return document.createElementNS('http://www.w3.org/2000/svg', type);
}

// Setup
// Animate content to have a running sample to work with




const sandbox = document.querySelector("#sandbox");
for (let box of sandbox.querySelectorAll(".box")) {
  box.animate(
      { transform : ['translateX(-100px)','translateX(100px)'] },
      {
          duration: 3000,
          iterations: Infinity // TODO: try infinity
      });
}

// Actual app code
let selectedElement;
let targetedElement;
let animations;
const EPSILON = 0.001;

function dragStart(evt) {
  evt.stopPropagation();
  // TODO: Get the animation from animations associated with evt.target
  let animation = evt.target.getAnimations()[0];
  // Get a keyframe for the current time
  let currentOffset = animation.currentTime / animation.effect.getTiming().duration;
  let keyframes = animation.effect.getKeyframes();
  let keyframe;
  let currentTransform = getComputedStyle(evt.target).transform;
  for (let index = 0; index < keyframes.length; index++) {
    // TODO: Find existing keyframe near currentOffset
    if (Math.abs(keyframes[index].computedOffset - currentOffset) < EPSILON) {
      keyframe = keyframes[index];
      break;
    } else if (keyframes[index].computedOffset > currentOffset) {
      // Insert new keyframe before index.
      keyframe = {
        offset: currentOffset,
      };
      keyframes.splice(index, 0, keyframe);
      break;
    }
  }

  let start = [evt.clientX, evt.clientY];
  console.log(evt);
  function dragMove(evt) {
    let delta = [evt.clientX - start[0], evt.clientY - start[1]];
    keyframe.transform = 'translate(' + delta[0] + 'px, ' + delta[1] + 'px) ' + currentTransform;
    animation.effect.setKeyframes(keyframes);
    drawAnimations();
  }

  function dragEnd(evt) {
    console.log(evt);
    evt.target.removeEventListener('pointermove', dragMove);
    evt.target.removeEventListener('pointercancel', dragEnd);
    evt.target.removeEventListener('pointerup', dragEnd);
    evt.target.releasePointerCapture(evt.pointerId);
  }
  evt.target.addEventListener('pointermove', dragMove);
  evt.target.addEventListener('pointercancel', dragEnd);
  evt.target.addEventListener('pointerup', dragEnd);
  evt.target.setPointerCapture(evt.pointerId);
}

function isAncestor(ancestor, node) {
  while (node && node != ancestor) {
    node = node.parentNode;
  }
  return node;
}

function selectElement(element) {
  if (targetedElement) {
    targetedElement.removeEventListener('pointerdown', dragStart);
    targetedElement.style.outline = '';
  }
  if (selectedElement) {
    if (!isAncestor(element, selectedElement))
      selectedElement = element;
  } else {
    selectedElement = element;
  }
  targetedElement = element;
  // Find the nearest ancestor with animations.
  // TODO: Allow creating animations on new nodes.
  while (targetedElement && targetedElement.getAnimations().length == 0)
    targetedElement = targetedElement.parentElement;
  if (targetedElement) {
    targetedElement.addEventListener('pointerdown', dragStart);
    targetedElement.style.outline = '1px solid blue';
  }
  let parents = $('#element-selector');
  // Remove all children
  parents.innerHTML = '';
  let cur = selectedElement;
  while (cur) {
    let elem = $('#element-item').cloneNode(true).content;
    elem.addEventListener('click', selectElement.bind(null, elem));
    $(elem, '.name').textContent = cur.tagName;
    if (cur == targetedElement) {
      $(elem, '.name').style.fontWeight = 'bold';
    }
    parents.appendChild(elem);
    cur = cur.parentElement;
  }
}

document.addEventListener('pointerdown', (evt) => {
  evt.stopPropagation();
  selectElement(evt.target);
});

animations = document.getAnimations({subtree: true});

const app = document.querySelector("#app");
const timeline = app.querySelector("#timeline");
const play = app.querySelector("#play");
const animationsView = app.querySelector("#animations");
const keyframeView = app.querySelector("#keyframe");

timeline.addEventListener('input', function(evt) {
  const progress = evt.target.value;
  updateCurrentTime(parseInt(progress));
});

play.addEventListener('click', function(evt) {
  let animation = animations[0]; // Bit hacky
  updatePlayState(animation.playState == 'paused');
});

function updatePlayState(shouldPlay) {
  let animation = animations[0]; // Bit hacky
  if ((animation.playState != 'paused') == shouldPlay)
    return;
  if (shouldPlay) {
    for (let anim of animations)
      anim.play();
    play.value = "Pause";
    updateTimeline(document.timeline.currentTime);
  } else {
    for (let anim of animations)
      anim.pause();
    play.value = "Play â–¶";
  }
}

function updateTimeline(frameTime) {
  // Update timeline to current time
  let animation = animations[0]; // Bit hacky
  if (animation.playState == 'paused')
    return;
  const duration = animation.effect.getTiming().duration;
  timeline.value = (animation.currentTime % duration) * 100 / duration;
  requestAnimationFrame(updateTimeline);
}
requestAnimationFrame(updateTimeline);
console.log(animations);

// we have to do this anytime our animations get updated
drawAnimations();

// progress is between 0-100
function updateCurrentTime(progress) {
  updatePlayState(false);
  for (let animation of animations) {
        // TODO: Use finite time length and allow extending animations.
        const duration = animation.effect.getTiming().duration;
        animation.currentTime = duration * progress/100;
    }
}

function drawAnimations() {
    animationsView.innerHTML = "";
    for (let animation of animations) {
        const li = document.createElement('li');
        drawAnimation(li, animation);
        animationsView.appendChild(li);
    }
}

// Drawing animation keyframes
function drawAnimation(parentElement, animation) {
    // copy template for foo.
    let elem = $('#foo').content.cloneNode(true);
    // $(elem,'.timing').innerHTML=`<div class="timings">${JSON.stringify(animation.effect.getTiming())}</div>`
    const keyframesViewSVG = $(elem, '.keyframes svg');

    const keyframes = animation.effect.getKeyframes();
    for (let i = 0; i < keyframes.length; i++){
        const keyframe = keyframes[i];
        const x1 = `${keyframe.computedOffset * 100}%`;
        if (i < keyframes.length - 1) {
            const x2 = `${keyframes[i+1].computedOffset * 100}%`;
            drawLine(x1, x2);
        }
        const circle = drawCircle(x1);

        circle.addEventListener('click', (evt) => {
            //evt.target.classList.add('selected');
            showKeyframe(keyframe);
        });
    }
    parentElement.appendChild(elem);

    function drawCircle(x) {
        const circle = svg('circle');
        circle.classList.add('my-class');
        circle.setAttribute('cx', x);
        circle.setAttribute('cy', 10);
        circle.style.stroke = 'blue';
        circle.style.fill = 'blue';

        circle.setAttribute('r', 5);
        keyframesViewSVG.appendChild(circle);
        return circle;
    }

    function drawLine(x1, x2) {
        const line = svg('line');
        line.setAttribute('x1', x1);
        line.setAttribute('x2', x2);
        line.setAttribute('y1', 10);
        line.setAttribute('y2', 10);
        line.setAttribute('x1', x1);
        line.style.stroke = 'lightblue';
        line.style.strokeWidth = 2;

        keyframesViewSVG.appendChild(line);
        return line;
    }
}


function showKeyframe(keyframe) {
    keyframeView.innerHTML =`
        <tt>${keyframe.computedOffset * 100}% - ${keyframe.transform}</tt>`;
    console.log(keyframe);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlcyI6WyJqcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG4vLyBpbXBvcnQgV2hhdGV2ZXIgZnJvbSAnaHR0cHM6Ly91bnBrZy5jb20vd2hhdGV2ZXInXG4vLyBpbXBvcnQgV2hhdGV2ZXIgZnJvbSAnd2hhdGV2ZXInXG5cbi8vIGltcG9ydCB7IGRlZmF1bHQgYXMgaW5kZXhfY3NzIH0gIGZyb20gJy4vY3NzL2luZGV4LmNzcydcblxuLy8gaW1wb3J0IHtoLCByZW5kZXIgfSBmcm9tICdodHRwczovL3VucGtnLmNvbS9wcmVhY3Q/bW9kdWxlJztcbi8vIGltcG9ydCB7QXBwfSBmcm9tICcuL2FwcC5qcydcblxuLy8gLy8gY29uc29sZS5pbmZvKGluZGV4X2Nzcylcbi8vIGNvbnNvbGUubG9nKCfwn5KA8J+kmCcpXG4vLyByZW5kZXIoaChBcHApLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFwcFwiKSk7XG5cblxuLy8gVXRpbGl0eVxuXG5cbmZ1bmN0aW9uICQoLyogYXJncyAqLykge1xuICAgIGxldCByb290ID0gZG9jdW1lbnQ7XG4gICAgbGV0IHF1ZXJ5ID0gYXJndW1lbnRzWzBdO1xuICAgIGlmIChhcmd1bWVudHNbMF0gaW5zdGFuY2VvZiBFbGVtZW50IHx8IGFyZ3VtZW50c1swXSBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpIHtcbiAgICAgICAgcm9vdCA9IGFyZ3VtZW50c1swXTtcbiAgICAgICAgcXVlcnkgPSBhcmd1bWVudHNbMV07XG4gICAgfVxuICAgIHJldHVybiByb290LnF1ZXJ5U2VsZWN0b3IocXVlcnkpO1xufVxuXG5mdW5jdGlvbiBzdmcodHlwZSkge1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgdHlwZSk7XG59XG5cbi8vIFNldHVwXG4vLyBBbmltYXRlIGNvbnRlbnQgdG8gaGF2ZSBhIHJ1bm5pbmcgc2FtcGxlIHRvIHdvcmsgd2l0aFxuXG5cblxuXG5jb25zdCBzYW5kYm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzYW5kYm94XCIpO1xuZm9yIChsZXQgYm94IG9mIHNhbmRib3gucXVlcnlTZWxlY3RvckFsbChcIi5ib3hcIikpIHtcbiAgYm94LmFuaW1hdGUoXG4gICAgICB7IHRyYW5zZm9ybSA6IFsndHJhbnNsYXRlWCgtMTAwcHgpJywndHJhbnNsYXRlWCgxMDBweCknXSB9LFxuICAgICAge1xuICAgICAgICAgIGR1cmF0aW9uOiAzMDAwLFxuICAgICAgICAgIGl0ZXJhdGlvbnM6IEluZmluaXR5IC8vIFRPRE86IHRyeSBpbmZpbml0eVxuICAgICAgfSk7XG59XG5cbi8vIEFjdHVhbCBhcHAgY29kZVxubGV0IHNlbGVjdGVkRWxlbWVudDtcbmxldCB0YXJnZXRlZEVsZW1lbnQ7XG5sZXQgYW5pbWF0aW9ucztcbmNvbnN0IEVQU0lMT04gPSAwLjAwMTtcblxuZnVuY3Rpb24gZHJhZ1N0YXJ0KGV2dCkge1xuICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIC8vIFRPRE86IEdldCB0aGUgYW5pbWF0aW9uIGZyb20gYW5pbWF0aW9ucyBhc3NvY2lhdGVkIHdpdGggZXZ0LnRhcmdldFxuICBsZXQgYW5pbWF0aW9uID0gZXZ0LnRhcmdldC5nZXRBbmltYXRpb25zKClbMF07XG4gIC8vIEdldCBhIGtleWZyYW1lIGZvciB0aGUgY3VycmVudCB0aW1lXG4gIGxldCBjdXJyZW50T2Zmc2V0ID0gYW5pbWF0aW9uLmN1cnJlbnRUaW1lIC8gYW5pbWF0aW9uLmVmZmVjdC5nZXRUaW1pbmcoKS5kdXJhdGlvbjtcbiAgbGV0IGtleWZyYW1lcyA9IGFuaW1hdGlvbi5lZmZlY3QuZ2V0S2V5ZnJhbWVzKCk7XG4gIGxldCBrZXlmcmFtZTtcbiAgbGV0IGN1cnJlbnRUcmFuc2Zvcm0gPSBnZXRDb21wdXRlZFN0eWxlKGV2dC50YXJnZXQpLnRyYW5zZm9ybTtcbiAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGtleWZyYW1lcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAvLyBUT0RPOiBGaW5kIGV4aXN0aW5nIGtleWZyYW1lIG5lYXIgY3VycmVudE9mZnNldFxuICAgIGlmIChNYXRoLmFicyhrZXlmcmFtZXNbaW5kZXhdLmNvbXB1dGVkT2Zmc2V0IC0gY3VycmVudE9mZnNldCkgPCBFUFNJTE9OKSB7XG4gICAgICBrZXlmcmFtZSA9IGtleWZyYW1lc1tpbmRleF07XG4gICAgICBicmVhaztcbiAgICB9IGVsc2UgaWYgKGtleWZyYW1lc1tpbmRleF0uY29tcHV0ZWRPZmZzZXQgPiBjdXJyZW50T2Zmc2V0KSB7XG4gICAgICAvLyBJbnNlcnQgbmV3IGtleWZyYW1lIGJlZm9yZSBpbmRleC5cbiAgICAgIGtleWZyYW1lID0ge1xuICAgICAgICBvZmZzZXQ6IGN1cnJlbnRPZmZzZXQsXG4gICAgICB9O1xuICAgICAga2V5ZnJhbWVzLnNwbGljZShpbmRleCwgMCwga2V5ZnJhbWUpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgbGV0IHN0YXJ0ID0gW2V2dC5jbGllbnRYLCBldnQuY2xpZW50WV07XG4gIGNvbnNvbGUubG9nKGV2dCk7XG4gIGZ1bmN0aW9uIGRyYWdNb3ZlKGV2dCkge1xuICAgIGxldCBkZWx0YSA9IFtldnQuY2xpZW50WCAtIHN0YXJ0WzBdLCBldnQuY2xpZW50WSAtIHN0YXJ0WzFdXTtcbiAgICBrZXlmcmFtZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKCcgKyBkZWx0YVswXSArICdweCwgJyArIGRlbHRhWzFdICsgJ3B4KSAnICsgY3VycmVudFRyYW5zZm9ybTtcbiAgICBhbmltYXRpb24uZWZmZWN0LnNldEtleWZyYW1lcyhrZXlmcmFtZXMpO1xuICAgIGRyYXdBbmltYXRpb25zKCk7XG4gIH1cblxuICBmdW5jdGlvbiBkcmFnRW5kKGV2dCkge1xuICAgIGNvbnNvbGUubG9nKGV2dCk7XG4gICAgZXZ0LnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIGRyYWdNb3ZlKTtcbiAgICBldnQudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJjYW5jZWwnLCBkcmFnRW5kKTtcbiAgICBldnQudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIGRyYWdFbmQpO1xuICAgIGV2dC50YXJnZXQucmVsZWFzZVBvaW50ZXJDYXB0dXJlKGV2dC5wb2ludGVySWQpO1xuICB9XG4gIGV2dC50YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCBkcmFnTW92ZSk7XG4gIGV2dC50YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmNhbmNlbCcsIGRyYWdFbmQpO1xuICBldnQudGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIGRyYWdFbmQpO1xuICBldnQudGFyZ2V0LnNldFBvaW50ZXJDYXB0dXJlKGV2dC5wb2ludGVySWQpO1xufVxuXG5mdW5jdGlvbiBpc0FuY2VzdG9yKGFuY2VzdG9yLCBub2RlKSB7XG4gIHdoaWxlIChub2RlICYmIG5vZGUgIT0gYW5jZXN0b3IpIHtcbiAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICB9XG4gIHJldHVybiBub2RlO1xufVxuXG5mdW5jdGlvbiBzZWxlY3RFbGVtZW50KGVsZW1lbnQpIHtcbiAgaWYgKHRhcmdldGVkRWxlbWVudCkge1xuICAgIHRhcmdldGVkRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVyZG93bicsIGRyYWdTdGFydCk7XG4gICAgdGFyZ2V0ZWRFbGVtZW50LnN0eWxlLm91dGxpbmUgPSAnJztcbiAgfVxuICBpZiAoc2VsZWN0ZWRFbGVtZW50KSB7XG4gICAgaWYgKCFpc0FuY2VzdG9yKGVsZW1lbnQsIHNlbGVjdGVkRWxlbWVudCkpXG4gICAgICBzZWxlY3RlZEVsZW1lbnQgPSBlbGVtZW50O1xuICB9IGVsc2Uge1xuICAgIHNlbGVjdGVkRWxlbWVudCA9IGVsZW1lbnQ7XG4gIH1cbiAgdGFyZ2V0ZWRFbGVtZW50ID0gZWxlbWVudDtcbiAgLy8gRmluZCB0aGUgbmVhcmVzdCBhbmNlc3RvciB3aXRoIGFuaW1hdGlvbnMuXG4gIC8vIFRPRE86IEFsbG93IGNyZWF0aW5nIGFuaW1hdGlvbnMgb24gbmV3IG5vZGVzLlxuICB3aGlsZSAodGFyZ2V0ZWRFbGVtZW50ICYmIHRhcmdldGVkRWxlbWVudC5nZXRBbmltYXRpb25zKCkubGVuZ3RoID09IDApXG4gICAgdGFyZ2V0ZWRFbGVtZW50ID0gdGFyZ2V0ZWRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gIGlmICh0YXJnZXRlZEVsZW1lbnQpIHtcbiAgICB0YXJnZXRlZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCBkcmFnU3RhcnQpO1xuICAgIHRhcmdldGVkRWxlbWVudC5zdHlsZS5vdXRsaW5lID0gJzFweCBzb2xpZCBibHVlJztcbiAgfVxuICBsZXQgcGFyZW50cyA9ICQoJyNlbGVtZW50LXNlbGVjdG9yJyk7XG4gIC8vIFJlbW92ZSBhbGwgY2hpbGRyZW5cbiAgcGFyZW50cy5pbm5lckhUTUwgPSAnJztcbiAgbGV0IGN1ciA9IHNlbGVjdGVkRWxlbWVudDtcbiAgd2hpbGUgKGN1cikge1xuICAgIGxldCBlbGVtID0gJCgnI2VsZW1lbnQtaXRlbScpLmNsb25lTm9kZSh0cnVlKS5jb250ZW50O1xuICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZWxlY3RFbGVtZW50LmJpbmQobnVsbCwgZWxlbSkpO1xuICAgICQoZWxlbSwgJy5uYW1lJykudGV4dENvbnRlbnQgPSBjdXIudGFnTmFtZTtcbiAgICBpZiAoY3VyID09IHRhcmdldGVkRWxlbWVudCkge1xuICAgICAgJChlbGVtLCAnLm5hbWUnKS5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xuICAgIH1cbiAgICBwYXJlbnRzLmFwcGVuZENoaWxkKGVsZW0pO1xuICAgIGN1ciA9IGN1ci5wYXJlbnRFbGVtZW50O1xuICB9XG59XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgKGV2dCkgPT4ge1xuICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIHNlbGVjdEVsZW1lbnQoZXZ0LnRhcmdldCk7XG59KTtcblxuYW5pbWF0aW9ucyA9IGRvY3VtZW50LmdldEFuaW1hdGlvbnMoe3N1YnRyZWU6IHRydWV9KTtcblxuY29uc3QgYXBwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhcHBcIik7XG5jb25zdCB0aW1lbGluZSA9IGFwcC5xdWVyeVNlbGVjdG9yKFwiI3RpbWVsaW5lXCIpO1xuY29uc3QgcGxheSA9IGFwcC5xdWVyeVNlbGVjdG9yKFwiI3BsYXlcIik7XG5jb25zdCBhbmltYXRpb25zVmlldyA9IGFwcC5xdWVyeVNlbGVjdG9yKFwiI2FuaW1hdGlvbnNcIik7XG5jb25zdCBrZXlmcmFtZVZpZXcgPSBhcHAucXVlcnlTZWxlY3RvcihcIiNrZXlmcmFtZVwiKTtcblxudGltZWxpbmUuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbihldnQpIHtcbiAgY29uc3QgcHJvZ3Jlc3MgPSBldnQudGFyZ2V0LnZhbHVlO1xuICB1cGRhdGVDdXJyZW50VGltZShwYXJzZUludChwcm9ncmVzcykpXG59KTtcblxucGxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xuICBsZXQgYW5pbWF0aW9uID0gYW5pbWF0aW9uc1swXTsgLy8gQml0IGhhY2t5XG4gIHVwZGF0ZVBsYXlTdGF0ZShhbmltYXRpb24ucGxheVN0YXRlID09ICdwYXVzZWQnKTtcbn0pO1xuXG5mdW5jdGlvbiB1cGRhdGVQbGF5U3RhdGUoc2hvdWxkUGxheSkge1xuICBsZXQgYW5pbWF0aW9uID0gYW5pbWF0aW9uc1swXTsgLy8gQml0IGhhY2t5XG4gIGlmICgoYW5pbWF0aW9uLnBsYXlTdGF0ZSAhPSAncGF1c2VkJykgPT0gc2hvdWxkUGxheSlcbiAgICByZXR1cm47XG4gIGlmIChzaG91bGRQbGF5KSB7XG4gICAgZm9yIChsZXQgYW5pbSBvZiBhbmltYXRpb25zKVxuICAgICAgYW5pbS5wbGF5KCk7XG4gICAgcGxheS52YWx1ZSA9IFwiUGF1c2VcIjtcbiAgICB1cGRhdGVUaW1lbGluZShkb2N1bWVudC50aW1lbGluZS5jdXJyZW50VGltZSk7XG4gIH0gZWxzZSB7XG4gICAgZm9yIChsZXQgYW5pbSBvZiBhbmltYXRpb25zKVxuICAgICAgYW5pbS5wYXVzZSgpO1xuICAgIHBsYXkudmFsdWUgPSBcIlBsYXkg4pa2XCI7XG4gIH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlVGltZWxpbmUoZnJhbWVUaW1lKSB7XG4gIC8vIFVwZGF0ZSB0aW1lbGluZSB0byBjdXJyZW50IHRpbWVcbiAgbGV0IGFuaW1hdGlvbiA9IGFuaW1hdGlvbnNbMF07IC8vIEJpdCBoYWNreVxuICBpZiAoYW5pbWF0aW9uLnBsYXlTdGF0ZSA9PSAncGF1c2VkJylcbiAgICByZXR1cm47XG4gIGNvbnN0IGR1cmF0aW9uID0gYW5pbWF0aW9uLmVmZmVjdC5nZXRUaW1pbmcoKS5kdXJhdGlvbjtcbiAgdGltZWxpbmUudmFsdWUgPSAoYW5pbWF0aW9uLmN1cnJlbnRUaW1lICUgZHVyYXRpb24pICogMTAwIC8gZHVyYXRpb247XG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGVUaW1lbGluZSk7XG59XG5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodXBkYXRlVGltZWxpbmUpO1xuY29uc29sZS5sb2coYW5pbWF0aW9ucyk7XG5cbi8vIHdlIGhhdmUgdG8gZG8gdGhpcyBhbnl0aW1lIG91ciBhbmltYXRpb25zIGdldCB1cGRhdGVkXG5kcmF3QW5pbWF0aW9ucygpO1xuXG4vLyBwcm9ncmVzcyBpcyBiZXR3ZWVuIDAtMTAwXG5mdW5jdGlvbiB1cGRhdGVDdXJyZW50VGltZShwcm9ncmVzcykge1xuICB1cGRhdGVQbGF5U3RhdGUoZmFsc2UpO1xuICBmb3IgKGxldCBhbmltYXRpb24gb2YgYW5pbWF0aW9ucykge1xuICAgICAgICAvLyBUT0RPOiBVc2UgZmluaXRlIHRpbWUgbGVuZ3RoIGFuZCBhbGxvdyBleHRlbmRpbmcgYW5pbWF0aW9ucy5cbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSBhbmltYXRpb24uZWZmZWN0LmdldFRpbWluZygpLmR1cmF0aW9uO1xuICAgICAgICBhbmltYXRpb24uY3VycmVudFRpbWUgPSBkdXJhdGlvbiAqIHByb2dyZXNzLzEwMDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYXdBbmltYXRpb25zKCkge1xuICAgIGFuaW1hdGlvbnNWaWV3LmlubmVySFRNTCA9IFwiXCI7XG4gICAgZm9yIChsZXQgYW5pbWF0aW9uIG9mIGFuaW1hdGlvbnMpIHtcbiAgICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICBkcmF3QW5pbWF0aW9uKGxpLCBhbmltYXRpb24pO1xuICAgICAgICBhbmltYXRpb25zVmlldy5hcHBlbmRDaGlsZChsaSk7XG4gICAgfVxufVxuXG4vLyBEcmF3aW5nIGFuaW1hdGlvbiBrZXlmcmFtZXNcbmZ1bmN0aW9uIGRyYXdBbmltYXRpb24ocGFyZW50RWxlbWVudCwgYW5pbWF0aW9uKSB7XG4gICAgLy8gY29weSB0ZW1wbGF0ZSBmb3IgZm9vLlxuICAgIGxldCBlbGVtID0gJCgnI2ZvbycpLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpO1xuICAgIC8vICQoZWxlbSwnLnRpbWluZycpLmlubmVySFRNTD1gPGRpdiBjbGFzcz1cInRpbWluZ3NcIj4ke0pTT04uc3RyaW5naWZ5KGFuaW1hdGlvbi5lZmZlY3QuZ2V0VGltaW5nKCkpfTwvZGl2PmBcbiAgICBjb25zdCBrZXlmcmFtZXNWaWV3U1ZHID0gJChlbGVtLCAnLmtleWZyYW1lcyBzdmcnKTtcblxuICAgIGNvbnN0IGtleWZyYW1lcyA9IGFuaW1hdGlvbi5lZmZlY3QuZ2V0S2V5ZnJhbWVzKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlmcmFtZXMubGVuZ3RoOyBpKyspe1xuICAgICAgICBjb25zdCBrZXlmcmFtZSA9IGtleWZyYW1lc1tpXTtcbiAgICAgICAgY29uc3QgeDEgPSBgJHtrZXlmcmFtZS5jb21wdXRlZE9mZnNldCAqIDEwMH0lYDtcbiAgICAgICAgaWYgKGkgPCBrZXlmcmFtZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgY29uc3QgeDIgPSBgJHtrZXlmcmFtZXNbaSsxXS5jb21wdXRlZE9mZnNldCAqIDEwMH0lYFxuICAgICAgICAgICAgZHJhd0xpbmUoeDEsIHgyKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjaXJjbGUgPSBkcmF3Q2lyY2xlKHgxKTtcblxuICAgICAgICBjaXJjbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICAvL2V2dC50YXJnZXQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgIHNob3dLZXlmcmFtZShrZXlmcmFtZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGVsZW0pO1xuXG4gICAgZnVuY3Rpb24gZHJhd0NpcmNsZSh4KSB7XG4gICAgICAgIGNvbnN0IGNpcmNsZSA9IHN2ZygnY2lyY2xlJyk7XG4gICAgICAgIGNpcmNsZS5jbGFzc0xpc3QuYWRkKCdteS1jbGFzcycpO1xuICAgICAgICBjaXJjbGUuc2V0QXR0cmlidXRlKCdjeCcsIHgpO1xuICAgICAgICBjaXJjbGUuc2V0QXR0cmlidXRlKCdjeScsIDEwKTtcbiAgICAgICAgY2lyY2xlLnN0eWxlLnN0cm9rZSA9ICdibHVlJztcbiAgICAgICAgY2lyY2xlLnN0eWxlLmZpbGwgPSAnYmx1ZSc7XG5cbiAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgncicsIDUpO1xuICAgICAgICBrZXlmcmFtZXNWaWV3U1ZHLmFwcGVuZENoaWxkKGNpcmNsZSk7XG4gICAgICAgIHJldHVybiBjaXJjbGU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZHJhd0xpbmUoeDEsIHgyKSB7XG4gICAgICAgIGNvbnN0IGxpbmUgPSBzdmcoJ2xpbmUnKTtcbiAgICAgICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3gxJywgeDEpO1xuICAgICAgICBsaW5lLnNldEF0dHJpYnV0ZSgneDInLCB4Mik7XG4gICAgICAgIGxpbmUuc2V0QXR0cmlidXRlKCd5MScsIDEwKTtcbiAgICAgICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3kyJywgMTApO1xuICAgICAgICBsaW5lLnNldEF0dHJpYnV0ZSgneDEnLCB4MSk7XG4gICAgICAgIGxpbmUuc3R5bGUuc3Ryb2tlID0gJ2xpZ2h0Ymx1ZSc7XG4gICAgICAgIGxpbmUuc3R5bGUuc3Ryb2tlV2lkdGggPSAyO1xuXG4gICAgICAgIGtleWZyYW1lc1ZpZXdTVkcuYXBwZW5kQ2hpbGQobGluZSk7XG4gICAgICAgIHJldHVybiBsaW5lO1xuICAgIH1cbn1cblxuXG5mdW5jdGlvbiBzaG93S2V5ZnJhbWUoa2V5ZnJhbWUpIHtcbiAgICBrZXlmcmFtZVZpZXcuaW5uZXJIVE1MID1gXG4gICAgICAgIDx0dD4ke2tleWZyYW1lLmNvbXB1dGVkT2Zmc2V0ICogMTAwfSUgLSAke2tleWZyYW1lLnRyYW5zZm9ybX08L3R0PmA7XG4gICAgY29uc29sZS5sb2coa2V5ZnJhbWUpO1xufSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsQ0FBQyxhQUFhO0FBQ3ZCLElBQUksSUFBSSxJQUFJLEdBQUcsUUFBUSxDQUFDO0FBQ3hCLElBQUksSUFBSSxLQUFLLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzdCLElBQUksSUFBSSxTQUFTLENBQUMsQ0FBQyxDQUFDLFlBQVksT0FBTyxJQUFJLFNBQVMsQ0FBQyxDQUFDLENBQUMsWUFBWSxnQkFBZ0IsRUFBRTtBQUNyRixRQUFRLElBQUksR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDNUIsUUFBUSxL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
